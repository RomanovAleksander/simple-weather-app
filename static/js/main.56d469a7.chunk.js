(this["webpackJsonpsimple-weather-app"]=this["webpackJsonpsimple-weather-app"]||[]).push([[0],{14:function(t,e,n){},16:function(t,e,n){},17:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n(6),r=n.n(c),s=n(2),o=n(3),i=n.n(o),u=n(5),l=n(7),f=n(8),h=function(){function t(){Object(l.a)(this,t),this._url="https://www.metaweather.com",this._prefix="https://cors-anywere.herokuapp.com/",this.errObj=function(t,e){return{message:"Invalid request: ".concat(t,", status ").concat(e),status:e}}}return Object(f.a)(t,[{key:"fetchData",value:function(){var t=Object(u.a)(i.a.mark((function t(e,n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this._prefix).concat(this._url).concat(e),n);case 2:if((a=t.sent).ok){t.next=5;break}throw this.errObj("".concat(this._url).concat(e),a.status);case 5:return t.abrupt("return",a.json());case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getWeather",value:function(){var t=Object(u.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.fetchData(e,{cors:"no-cors"}));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getWeatherIcon",value:function(t){return"".concat(this._url,"/static/img/weather/png/64/").concat(t,".png")}}]),t}(),b=new h,j=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},d=function(t,e,n){var a=j(t),c=j(e),r=(Math.abs(n)+10)/40,s=a.r+r*(c.r-a.r),o=a.g+r*(c.g-a.g),i=a.b+r*(c.b-a.b);return"rgb(".concat(s,", ").concat(o,", ").concat(i,")")},p=function(t){return t<=-10?"#00ffff":t>-10&&t<10?d("#00ffff","#fff700",t):10===t?"#fff700":t>10&&t<30?d("#fff700","#ff8c00",t):t>=30?"#ff8c00":"#ffffff"},m=(n(14),n(0));function O(t){var e=t.onSubmit,n=Object(a.useState)(""),c=Object(s.a)(n,2),r=c[0],o=c[1];return Object(m.jsx)("form",{className:"search-form",onSubmit:function(t){t.preventDefault(),"kyiv"===r.toLowerCase()?e("kiev"):e(r.toLowerCase()),o("")},children:Object(m.jsxs)("div",{className:"input-wrapper",children:[Object(m.jsx)("input",{type:"text",autoComplete:"off",placeholder:"Enter the city",value:r,onChange:function(t){var e=t.target.value;o(e)},minLength:1,required:!0}),Object(m.jsx)("button",{type:"submit",className:"search-button"})]})})}n(16);function g(t){var e=t.city,n=t.handleClick;return Object(m.jsxs)("div",{className:"city-item",children:[Object(m.jsx)("img",{src:b.getWeatherIcon(e.consolidated_weather[0].weather_state_abbr),alt:"".concat(e.consolidated_weather[0].weather_state_name)}),Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsxs)("div",{className:"title green",children:[e.title,", ",e.parent.title,Object(m.jsxs)("span",{className:"weather",children:[" ",e.consolidated_weather[0].weather_state_name]})]}),Object(m.jsxs)("div",{className:"temp-container",children:[Object(m.jsxs)("span",{className:"temp",children:[e.consolidated_weather[0].the_temp.toString().substring(0,4)," \xb0\u0421"]})," temperature from",e.consolidated_weather[0].min_temp," to ",e.consolidated_weather[0].max_temp," \xb0\u0421"]}),Object(m.jsxs)("div",{children:["Geo coords ","",Object(m.jsxs)("span",{className:"green coords",onClick:function(){return n(e.parent.latt_long)},children:["[",e.parent.latt_long,"]"]})]})]})]},e.woeid)}var w=function(){var t=Object(a.useState)(!1),e=Object(s.a)(t,2),n=e[0],c=e[1],r=Object(a.useState)(!1),o=Object(s.a)(r,2),i=o[0],u=o[1],l=Object(a.useState)(""),f=Object(s.a)(l,2),h=f[0],j=f[1],d=Object(a.useState)(null),w=Object(s.a)(d,2),v=w[0],x=w[1],_=Object(a.useState)(null),y=Object(s.a)(_,2),k=y[0],N=y[1],S=Object(a.useState)(null),C=Object(s.a)(S,2),I=C[0],W=C[1];Object(a.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(t){c(t.coords.latitude),u(t.coords.longitude)}))}),[]),Object(a.useEffect)((function(){n&&i&&E("?lattlong=".concat(n,",").concat(i))}),[n,i]),Object(a.useEffect)((function(){""!==h&&E("?query=".concat(h))}),[h]);var E=function(t){b.getWeather("/api/location/search/".concat(t)).then((function(t){b.getWeather("/api/location/".concat(t[0].woeid,"/")).then((function(t){x(t),N(t.consolidated_weather[0].the_temp),W(null)})).catch((function(t){return W(t)}))})).catch((function(t){return W(t)}))};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O,{onSubmit:function(t){x(null),j(t)}}),I&&Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("h3",{children:"Ops... Something went wrong"})}),v&&!h&&Object(m.jsxs)("div",{className:"container",style:{backgroundColor:p(parseFloat(k))},children:[Object(m.jsx)("img",{src:b.getWeatherIcon(v.consolidated_weather[0].weather_state_abbr),alt:"".concat(v.consolidated_weather[0].weather_state_name)}),k&&Object(m.jsxs)("div",{className:"slider-container",children:[Object(m.jsxs)("label",{className:"label",children:["Temperature: ",Math.round(parseFloat(k))," \xb0\u0421"]}),Object(m.jsx)("input",{className:"slider",type:"range",min:"-60",max:"60",value:k,onChange:function(t){N(t.target.value)},step:"1"})]})]}),v&&h&&Object(m.jsx)(g,{city:v,handleClick:function(t){j(""),E("?lattlong=".concat(t))}})]})};n(17);r.a.render(Object(m.jsx)(w,{}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.56d469a7.chunk.js.map